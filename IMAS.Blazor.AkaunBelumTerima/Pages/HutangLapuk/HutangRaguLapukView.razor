@page "/HutangRaguLapuk"
@using MudBlazor

<MudPaper Class="pa-4">
    <MudCard>
        <MudCardHeader>
            <MudText Typo="Typo.h6">Hutang Ragu Dan Lapuk</MudText>
        </MudCardHeader>
        <MudCardContent>
            <MudGrid>
                <MudItem xs="12" sm="6">
                    <MudTextField Label="Tarikh" @bind-Value="SelectedDate" InputType="InputType.Date" />
                </MudItem>
            </MudGrid>

            <MudDivider Class="my-4" />

            <MudText Typo="Typo.h6">Senarai Hutang Ragu Dan Lapuk</MudText>

            <MudTable Items="debtorList" Hover="true" Bordered="true">
                <HeaderContent>
                    <MudTh>#</MudTh>
                    <MudTh>Debtor</MudTh>
                    <MudTh>Date</MudTh>
                    <MudTh>Document</MudTh>
                    <MudTh>Current</MudTh>
                    <MudTh>1 Year</MudTh>
                    <MudTh>2 Year</MudTh>
                    <MudTh>3 Year</MudTh>
                    <MudTh>4 Year</MudTh>
                    <MudTh>5 Year</MudTh>
                    <MudTh>>=6 Year</MudTh>
                    <MudTh>Open Credit</MudTh>
                    <MudTh>Total</MudTh>
                    <MudTh>Extended Amount</MudTh>
                </HeaderContent>
                <RowTemplate>
                    <MudTd>@context.Id</MudTd>
                    <MudTd>@context.Name</MudTd>
                    <MudTd>@context.Date.ToShortDateString()</MudTd>
                    <MudTd>@context.Document</MudTd>
                    <MudTd>@context.Current</MudTd>
                    <MudTd>@context.Year1</MudTd>
                    <MudTd>@context.Year2</MudTd>
                    <MudTd>@context.Year3</MudTd>
                    <MudTd>@context.Year4</MudTd>
                    <MudTd>@context.Year5</MudTd>
                    <MudTd>@context.Year6Plus</MudTd>
                    <MudTd>@context.OpenCredit</MudTd>
                    <MudTd>@context.Total</MudTd>
                    <MudTd>@context.ExtendedAmount</MudTd>
                </RowTemplate>
            </MudTable>

            <MudButton Variant="Variant.Filled" Color="Color.Primary" Class="mt-4">Cetak</MudButton>
        </MudCardContent>
    </MudCard>

    <MudExpansionPanels Class="mt-6">
        <MudExpansionPanel Text="Integrasi Ke Pengurusan Hutang dan Jurnal Peruntukan">
            <MudGrid>
                <MudItem xs="12" sm="4">
                    <MudSelect Label="Bulan" @bind-Value="SelectedMonth" Required="true">
                        @foreach (var m in Months)
                        {
                            <MudSelectItem Value="m">@m</MudSelectItem>
                        }
                    </MudSelect>
                </MudItem>
                <MudItem xs="12" sm="4">
                    <MudTextField Label="Peratusan" @bind-Value="Percentage" />
                </MudItem>
            </MudGrid>

            <div class="mt-4 d-flex gap-2">
                <MudButton Variant="Variant.Filled" Color="Color.Success">Tambah</MudButton>
                <MudButton Variant="Variant.Filled" Color="Color.Error">Batal</MudButton>
                <MudButton Variant="Variant.Filled" Color="Color.Warning">Jana</MudButton>
            </div>
        </MudExpansionPanel>
    </MudExpansionPanels>
</MudPaper>

@code {
    public DateTime? SelectedDate { get; set; }
    public string SelectedMonth { get; set; }
    public string Percentage { get; set; }

    public List<string> Months = new() {
        "January", "February", "March", "April", "May", "June",
        "July", "August", "September", "October", "November", "December"
    };

    public List<DebtorRecord> debtorList = new();

    public class DebtorRecord
    {
        public int Id { get; set; }
        public string Name { get; set; }
        public DateTime Date { get; set; }
        public string Document { get; set; }
        public decimal Current { get; set; }
        public decimal Year1 { get; set; }
        public decimal Year2 { get; set; }
        public decimal Year3 { get; set; }
        public decimal Year4 { get; set; }
        public decimal Year5 { get; set; }
        public decimal Year6Plus { get; set; }
        public decimal OpenCredit { get; set; }
        public decimal Total { get; set; }
        public decimal ExtendedAmount { get; set; }
    }
}